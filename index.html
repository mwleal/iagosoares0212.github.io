

<html>
<script>
 function setup() {
  createCanvas(1200, 550);
}

  var x = 51
  var y = 451;

var telaAtiva = 1
function draw() {
   switch(telaAtiva) {
    case 1:
      inicio();
      break;
    case 2:
      intro();
      break;
   }
}
function keyPressed() {
    if(keyCode === ENTER && telaAtiva===1){
      telaAtiva = 2
  }
}
function inicio() {
  let tela = 1
  background('green');
  fill(200,0,0)
  textSize(20);
  text('aperte enter para começar',475 , 450);
  textSize(40)
  textStyle(BOLD)
  text('Torre da matemática',410,100)  
  
}
function torre() {
  let map = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,0,0,0,3,0,0,0,0,0,3,0,0,0,0,0,0,3,0,0,0,0,1],
    [1,0,0,0,0,3,0,0,0,0,0,3,0,0,0,0,0,0,3,0,0,0,0,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],
    [1,0,0,0,0,3,0,0,0,0,0,3,0,0,0,0,0,0,3,0,0,0,2,1],
    [1,0,0,0,0,3,0,0,0,0,0,3,0,0,0,0,0,0,3,0,0,0,2,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
  ];
  var opcoes = [0,1];
  var tileSize=50;
  background(220);
  for (let i = 0; i < map.length; i++) {
    for (let j = 0; j < map[i].length; j++) {
      if (map[i][j] === 1) {
        fill(150, 0, 0);
        rect(j * tileSize, i * tileSize, tileSize, tileSize);
      }
      if (map[i][j] === 2) {
        fill(0, 150, 0);
        rect(j * tileSize, i * tileSize, tileSize, tileSize);
      }
      if (map[i][j] === 3) {
        fill(0, 150, 150);
        rect(j * tileSize, i * tileSize, tileSize, tileSize);
      }
    }
  }
  if (keyIsDown(LEFT_ARROW) && !bateuNoMapa(x-5,y)) {
    x-=10;    
  }
  if (keyIsDown(RIGHT_ARROW)&& !bateuNoMapa(x+5,y)  ){
    x+=10;
  }
  if (!bateuNoMapa(x,y+5)&& !escada(x,y+5)) {
    y+=10;
  }
  if (keyIsDown(DOWN_ARROW) && !bateuNoMapa(x,y+5)&& escada(x,y+5)) {
    y+=10;
  }
  if (keyIsDown(UP_ARROW) && !bateuNoMapa(x,y-5)&& escada(x,y+5)) {
    y-=10;
  }
  fill(0, 0, 250);
  rect(x, y, 48, 48);
  function bateuNoMapa(a, b) {
    let bateu=false; 
    for (var i = 0; i < map.length; i++) {
      for (var j = 0; j < map[i].length; j++) {
        if(map[i][j]==1 && colisao(a,b,j * tileSize,i * tileSize)){
          bateu=true;
          return bateu;
        }
      }
    }
    return bateu;
  }
  function escada(a, b) {
    let stair=false; 
    for (var i = 0; i < map.length; i++) {
      for (var j = 0; j < map[i].length; j++) {
        if(map[i][j]==2 && colisao(a,b,j * tileSize,i * tileSize)){
          stair=true;
          return stair;
        }
      }
    }
    return stair;
  }
  function colisao(x1,y1,x2,y2) {
    if(x1 > x2 + 48)
      return false;
    if(y1 > y2 + 48)
      return false;
    if(x1 + 48 < x2)
      return false;
    if(y1 + 48 < y2)
      return false;
    return true;
  }
}


function intro() {
  let map = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,3,0,0,0,0,0,0,0,0,5,0,0,0,0,0,7,0,0,0,0,0,0,1],
    [1,4,0,0,0,0,0,0,0,0,6,0,0,0,0,0,8,0,0,0,0,0,0,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,0,0,0,0,0,0,0,1,1,2,1,1,0,0,0,9,0,0,10,0,0,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
  ];
  var opcoes = [0,1];
  var tileSize=50;
  background(220);
  for (let i = 0; i < map.length; i++) {
    for (let j = 0; j < map[i].length; j++) {
      if (map[i][j] === 1) {
        fill(150, 0, 0);
        rect(j * tileSize, i * tileSize, tileSize, tileSize);
      }
      if (map[i][j] === 2) {
        fill(300, 150, 0);
        rect(j * tileSize, i * tileSize, tileSize, tileSize);
      }
      if (map[i][j] === 3) {
        textSize(20); 
        text('Use as setas direcionais',j * tileSize, i * tileSize);
      }
      if (map[i][j] === 4) {
        textSize(20); 
        text('      para movimentar',j * tileSize, i * tileSize);
      }
      if (map[i][j] === 5) {
        textSize(20); 
        text('Aperte para cima',j * tileSize, i * tileSize);
      }
      if (map[i][j] === 6) {
        textSize(20); 
        text('      para pular',j * tileSize, i * tileSize);
      }
      if (map[i][j] === 7) {
        textSize(20); 
        text('Aperte a barra de espaço para',j * tileSize, i * tileSize);
      }
      if (map[i][j] === 8) {
        textSize(20); 
        text('atacar e interagir com objetos',j * tileSize, i * tileSize);
      }
      if (map[i][j] === 9) {
        fill(0, 0, 0);
        rect(j * tileSize, i * tileSize, tileSize, tileSize);
      }
          if (map[i][j] === 10) {
        fill(0, 150, 150);
        rect(j * tileSize, i * tileSize, tileSize, tileSize);
      }
      
    }
  }
  if (keyIsDown(LEFT_ARROW) && !bateuNoMapa(x-5,y)) {
    x-=10;    
  }
  if (keyIsDown(RIGHT_ARROW)&& !bateuNoMapa(x+5,y)  ){
    x+=10;
  }
  if (!bateuNoMapa(x,y+5)&& !escada(x,y+5)) {
    y+=10;
  }
  if (keyIsDown(DOWN_ARROW) && !bateuNoMapa(x,y+5)&& escada(x,y+5)) {
    y+=10;
  }
  if (keyIsDown(UP_ARROW) && !bateuNoMapa(x,y-5)&& escada(x,y+5)) {
    y-=10;
  }
  fill(0, 0, 250);
  rect(x, y, 48, 48);
  function bateuNoMapa(a, b) {
    let bateu=false; 
    for (var i = 0; i < map.length; i++) {
      for (var j = 0; j < map[i].length; j++) {
        if(map[i][j]==1 && colisao(a,b,j * tileSize,i * tileSize)){
          bateu=true;
          return bateu;
        }
      }
    }
    return bateu;
  }
  function escada(a, b) {
    let stair=false; 
    for (var i = 0; i < map.length; i++) {
      for (var j = 0; j < map[i].length; j++) {
        if(map[i][j]==2 && colisao(a,b,j * tileSize,i * tileSize)){
          stair=true;
          return stair;
        }
      }
    }
    return stair;
  }
  function colisao(x1,y1,x2,y2) {
    if(x1 > x2 + 48)
      return false;
    if(y1 > y2 + 48)
      return false;
    if(x1 + 48 < x2)
      return false;
    if(y1 + 48 < y2)
      return false;
    return true;
  }
}
</script>
</html>

